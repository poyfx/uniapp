(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/positive/positive2"],{"078d":function(e,t,s){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(s("a7aa")),r=p(s("63eb")),n=p(s("5ff9")),a=p(s("447e")),u=p(s("d838"));s("71c2");function p(e){return e&&e.__esModule?e:{default:e}}var h=function(){return s.e("components/step/step").then(s.bind(null,"0e21"))},g=function(){return s.e("components/m-button").then(s.bind(null,"1460"))},c=function(){return s.e("components/twoButton/twoButton").then(s.bind(null,"a41a"))},l=function(){return Promise.all([s.e("common/vendor"),s.e("rattenking-dtpicker/rattenking-dtpicker")]).then(s.bind(null,"d6ea"))},v=function(){return Promise.all([s.e("common/vendor"),s.e("components/w-picker/w-picker")]).then(s.bind(null,"2ae5"))},m={data:function(){return{step:{value1:"第一步",value2:"第二步",value3:"第三步",value4:"第四步",active:"step-active",ago:"step-ago",kong:"",kong1:"",kong2:""},btn:{type:"primary",value:"下一步",disabled:!1,content:"上一步",commit:"注册",stepOne:!0,stepTwo:!1,stepThree:!1,stepFour:!1,Dates:!1,dates:!1},info:["正面","反面"],tellinfo:["正面示例","反面示例","授权书示例","授权书示例"],num:0,count:0,src:o.default,ifday:!1,ifdays:!1,times:!0,apply_one:!0,idCardZ:"",idCardF:"",buyOil:"",takeOil:"",register:"",user:"",img:[],mode:"date",day:"2019-01-01",days:"2019-01-01",clientID:"",faceimg:{name:"face_photo",uri:""}}},onLoad:function(t){this.faceimg.uri=t.faceimg,this.register=e.getStorageSync("register"),this.user=t.user,console.log(i(typeof this.register.user,this.faceimg," at pages\\register\\positive\\positive2.vue:167")),"发票领取人,购油人"==this.register.user?(console.log(i(100," at pages\\register\\positive\\positive2.vue:169")),this.register.user):"发票领取人,提油人"==this.register.user?(console.log(i(100," at pages\\register\\positive\\positive2.vue:173")),this.register.user):"提油人,购油人"==this.register.user&&(console.log(i(100," at pages\\register\\positive\\positive2.vue:177")),this.register.user),"购油人,提油人"==this.register.user?(this.info.push(this.register.user.slice(0,2)),this.info.push(this.register.user.slice(4,6)),console.log(i(this.info," at pages\\register\\positive\\positive2.vue:183"))):"购油人,发票领取人"!=this.register.user&&"提油人,发票领取人"!=this.register.user||(this.info.push(this.register.user.slice(0,2)),this.info.push(this.register.user.slice(4,8)),console.log(i(this.info," at pages\\register\\positive\\positive2.vue:187"))),console.log(i(this.info," at pages\\register\\positive\\positive2.vue:189")),this.getclientid()},methods:{getclientid:function(){var t=this;e.getStorage({key:"clientid",success:function(e){t.clientID=e.data,console.log(i(e," at pages\\register\\positive\\positive2.vue:199"))}})},all:function(){if(1==this.btn.stepOne){var t=this;e.chooseImage({count:1,success:function(e){t.count=1,console.log(i(e.tempFiles[0].path," at pages\\register\\positive\\positive2.vue:211")),t.idCardZ=e.tempFilePaths,t.src=e.tempFiles[0].path;var s={name:"id_fphoto",uri:e.tempFilePaths[0]};t.img.splice(0,1,s)}})}else if(1==this.btn.stepTwo){var s=this;e.chooseImage({count:1,success:function(e){console.log(i(e.tempFiles," at pages\\register\\positive\\positive2.vue:230")),s.count=2,s.idCardF=e.tempFilePaths,s.src=e.tempFiles[0].path;var t={name:"id_bphoto",uri:e.tempFilePaths[0]};s.img.splice(1,1,t)}})}else if(1==this.btn.stepThree){"发票领取人,购油人"==this.register.user&&this.register.user,console.log(i(1," at pages\\register\\positive\\positive2.vue:249")),console.log(i(this.register," at pages\\register\\positive\\positive2.vue:250"));var o=this;"购油人,提油人"==this.register.user||"购油人,发票领取人"==this.register.user?(console.log(i(2," at pages\\register\\positive\\positive2.vue:253")),e.chooseImage({count:1,success:function(e){console.log(i(e.tempFiles," at pages\\register\\positive\\positive2.vue:257")),o.count=3,o.buyOil=e.tempFilePaths,o.src=e.tempFiles[0].path;var t={name:"buy_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t)}})):"提油人,发票领取人"==this.register.user&&e.chooseImage({count:1,success:function(e){console.log(i(e.tempFiles," at pages\\register\\positive\\positive2.vue:276")),o.count=3,o.buyOil=e.tempFilePaths,o.src=e.tempFiles[0].path;var t={name:"get_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t)}})}else if(1==this.btn.stepFour){var r=this;"购油人,提油人"==this.register.user?e.chooseImage({count:1,success:function(e){console.log(i(e.tempFiles," at pages\\register\\positive\\positive2.vue:299")),r.count=4,r.takeOil=e.tempFilePaths,r.src=e.tempFiles[0].path;var t={name:"get_auth_photo",uri:e.tempFilePaths[0]};r.img.splice(3,1,t)}}):e.chooseImage({count:1,success:function(e){console.log(i(e.tempFiles," at pages\\register\\positive\\positive2.vue:318")),r.count=4,r.takeOil=e.tempFilePaths,r.src=e.tempFiles[0].path;var t={name:"bill_auth_photo",uri:e.tempFilePaths[0]};r.img.splice(3,1,t)}})}},oneSide:function(){if(console.log(i(this.register.role," at pages\\register\\positive\\positive2.vue:342")),console.log(i(this.count," at pages\\register\\positive\\positive2.vue:343")),1==this.img.length)console.log(i(1," at pages\\register\\positive\\positive2.vue:345")),this.btn.stepOne=!1,this.btn.stepTwo=!0,this.num=1,this.src=r.default,this.step.active="step-ago",this.step.kong="step-active";else{if(!(this.img.length>1))return e.showToast({title:"请上传身份证正面照",icon:"none",position:"bottom"});console.log(i(2," at pages\\register\\positive\\positive2.vue:354")),this.btn.stepOne=!1,this.btn.stepTwo=!0,this.num=1,this.src=this.img[1].uri,this.step.active="step-ago",this.step.kong="step-active"}},lastStep:function(){console.log(i(this.img[0].uri," at pages\\register\\positive\\positive2.vue:373")),this.src=this.img[0].uri,this.btn.stepOne=!0,this.btn.stepTwo=!1,this.num=0,this.step.active="step-active",this.step.kong=""},nextStep:function(){if(console.log(i(this.count," at pages\\register\\positive\\positive2.vue:385")),2==this.img.length)this.btn.stepTwo=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.num=2,"购油人,提油人"==this.register.user||"购油人,发票领取人"==this.register.user?this.src=n.default:this.src=a.default,this.step.active="step-ago",this.step.kong="step-ago",this.step.kong1="step-active";else{if(!(this.img.length>2))return e.showToast({title:"请上传身份证反面照",icon:"none",position:"bottom"});this.btn.stepTwo=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.num=2,this.src=this.img[2].uri,this.step.active="step-ago",this.step.kong="step-ago",this.step.kong1="step-active"}},threeStepLast:function(){this.btn.stepThree=!1,this.btn.stepTwo=!0,this.btn.Dates=!1,this.num=1,this.src=this.img[1].uri,this.step.active="step-ago",this.step.kong="step-active",this.step.kong1=""},threeStepNext:function(){if(console.log(i(this.register.role," at pages\\register\\positive\\positive2.vue:433")),console.log(i(this.count," at pages\\register\\positive\\positive2.vue:434")),3==this.img.length){if(1==this.ifday)this.btn.stepThree=!1,this.btn.stepFour=!0,this.btn.Dates=!1,this.btn.dates=!0,this.num=3,"购油人,提油人"==this.register.user?this.src=a.default:this.src=u.default,this.step.kong="step-ago",this.step.kong1="step-ago",this.step.kong2="step-active";else if(0==this.ifday)return e.showToast({title:"请选择授权有效期",icon:"none",position:"bottom"})}else{if(!(this.img.length>3))return e.showToast({title:"请上传购油授权书",icon:"none",position:"bottom"});this.btn.stepThree=!1,this.btn.stepFour=!0,this.btn.Dates=!1,this.btn.dates=!0,this.num=3,this.src=this.img[3].uri,this.step.kong="step-ago",this.step.kong1="step-ago",this.step.kong2="step-active"}},fourStepLast:function(){this.btn.stepFour=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.btn.dates=!1,this.num=2,this.src=this.img[2].uri,this.step.kong="step-ago",this.step.kong1="step-active",this.step.kong2=""},fourStepNext:function(){this.img.push(this.faceimg);var t=this.img.map(function(e,t){return{name:e.name,uri:e.uri}}),s="http://dev.pjy.name:8170/api/bizcust/base/regist";if(!(this.img.length>=4))return e.showToast({title:"请上传提油授权书",icon:"none"});if(console.log(i(t," at pages\\register\\positive\\positive2.vue:503")),1==this.ifdays)"购油人,提油人"==this.register.user?e.uploadFile({url:s,files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,buy_auth_exp:this.day,get_auth_exp:this.days,client_id:this.clientID},success:function(t){var s=JSON.parse(t.data);console.log(i(s," at pages\\register\\positive\\positive2.vue:527")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"注册已提交，审核成功后即可登录使用",icon:"none",position:"bottom"}),e.removeStorage({key:"register"}),e.navigateTo({url:"../../login/login?val="+s.value})):e.showToast({title:s.message,icon:"none",position:"bottom"}))}}):"购油人,发票领取人"==this.register.user?e.uploadFile({url:s,files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,buy_auth_exp:this.day,bill_auth_exp:this.days,client_id:this.clientID},success:function(t){var s=JSON.parse(t.data);console.log(i(s," at pages\\register\\positive\\positive2.vue:575")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"注册已提交，审核成功后即可登录使用",icon:"none",position:"bottom"}),e.removeStorage({key:"register"}),e.navigateTo({url:"../../login/login?val="+s.value})):e.showToast({title:s.message,icon:"none",position:"bottom"}))}}):e.uploadFile({url:s,files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,get_auth_exp:this.day,bill_auth_exp:this.days,client_id:this.clientID},success:function(t){var s=JSON.parse(t.data);console.log(i(t," at pages\\register\\positive\\positive2.vue:623")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"注册已提交，审核成功后即可登录使用",icon:"none",position:"bottom"}),e.removeStorage({key:"register"}),e.navigateTo({url:"../../login/login?val="+s.value})):e.showToast({title:s.message,icon:"none",position:"bottom"}))}});else if(0==this.ifdays)return e.showToast({title:"请选择授权有效期",icon:"none"})},changeTimes:function(){this.times=!1,this.$refs.date.show()},changeTime:function(){this.apply_one=!1,this.$refs.date1.show()},onConfirm:function(e){console.log(i(e," at pages\\register\\positive\\positive2.vue:674")),this.day=e.result,this.ifday=!0},onConfirms:function(e){this.days=e.result,this.ifdays=!0},previewImage:function(t){console.log(i(this.src,n.default," at pages\\register\\positive\\positive2.vue:684")),t>=2&&e.previewImage({current:t,urls:[n.default]})}},components:{step:h,mButton:g,tButton:c,ruiDatePicker:l,wPicker:v}};t.default=m}).call(this,s("6e42")["default"],s("0de9")["default"])},"0a43":function(e,t,s){},c828:function(e,t,s){"use strict";var i=s("0a43"),o=s.n(i);o.a},cdc7:function(e,t,s){"use strict";s.r(t);var i=s("078d"),o=s.n(i);for(var r in i)"default"!==r&&function(e){s.d(t,e,function(){return i[e]})}(r);t["default"]=o.a},d253:function(e,t,s){"use strict";(function(e){s("8790"),s("921b");i(s("66fd"));var t=i(s("f584"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("6e42")["createPage"])},f584:function(e,t,s){"use strict";s.r(t);var i=s("f811"),o=s("cdc7");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);s("c828");var n=s("2877"),a=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,"92e0d252",null);t["default"]=a.exports},f811:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},o=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return o})}},[["d253","common/runtime","common/vendor"]]]);