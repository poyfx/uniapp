(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/positive/positive1"],{"0044":function(e,t,s){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(s("a7aa")),r=u(s("63eb")),n=u(s("0362")),a=s("2f62");s("4676"),s("71c2");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),i.forEach(function(t){l(e,t,s[t])})}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var h=function(){return s.e("components/step/step").then(s.bind(null,"0e21"))},p=function(){return s.e("components/m-button").then(s.bind(null,"1460"))},g=function(){return s.e("components/twoButton/twoButton").then(s.bind(null,"a41a"))},m=function(){return Promise.all([s.e("common/vendor"),s.e("rattenking-dtpicker/rattenking-dtpicker")]).then(s.bind(null,"d6ea"))},v=function(){return Promise.all([s.e("common/vendor"),s.e("components/w-picker/w-picker")]).then(s.bind(null,"2ae5"))},d={data:function(){return{step:{value1:"第一步",value2:"第二步",value3:"第三步",active:"step-active",ago:"step-ago",kong:"",kong1:""},btn:{type:"primary",value:"下一步",disabled:!1,content:"上一步",commit:"提交",stepOne:!0,stepTwo:!1,stepThree:!1},info:["正面","反面"],tellinfo:["正面示例","反面示例","授权书示例"],num:0,count:0,src:o.default,day:"2019-01-01",ifday:!1,times:!0,idCardZ:"",idCardF:"",buyOil:"",register:"",img:[],name:"",inputs:"",mode:"date",userCode:"",user:""}},onLoad:function(t){this.user=t.user,this.userCode=t.userCode,this.register=e.getStorageSync("register"),"发票领取人"==t.user?this.info.push(t.user.slice(0,4)):this.info.push(t.user.slice(0,2)),console.log(i(this.info," at pages\\register\\positive\\positive1.vue:133")),this.name=t.name,console.log(i(this.register," at pages\\register\\positive\\positive1.vue:136"))},methods:{all:function(){e.createCanvasContext("myCanvas");if(1==this.btn.stepOne){var t=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(e){t.count=1;var s={name:"id_fphoto",uri:e.tempFilePaths[0]};t.img.splice(0,1,s),t.src=e.tempFiles[0].path}})}else if(1==this.btn.stepTwo){var s=this;e.chooseImage({count:1,success:function(e){console.log(i(e.tempFiles," at pages\\register\\positive\\positive1.vue:165")),s.count=2;var t={name:"id_bphoto",uri:e.tempFilePaths[0]};s.img.splice(1,1,t),s.src=e.tempFiles[0].path}})}else if(1==this.btn.stepThree)if("register"==this.name){var o=this;"购油人"==this.register.user?e.chooseImage({count:1,success:function(e){o.count=3;var t={name:"buy_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t),o.src=e.tempFiles[0].path}}):"提油人"==this.register.user?e.chooseImage({count:1,success:function(e){o.count=3;var t={name:"get_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t),o.src=e.tempFiles[0].path}}):e.chooseImage({count:1,success:function(e){o.count=3;var t={name:"bill_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t),o.src=e.tempFiles[0].path}})}else{var r=this;1==this.userCode?e.chooseImage({count:1,success:function(e){r.count=3;var t={name:"buy_auth_photo",uri:e.tempFilePaths[0]};r.img.splice(2,1,t),r.src=e.tempFiles[0].path}}):2==this.userCode?e.chooseImage({count:1,success:function(e){r.count=3;var t={name:"get_auth_photo",uri:e.tempFilePaths[0]};r.img.splice(2,1,t),r.src=e.tempFiles[0].path}}):e.chooseImage({count:1,success:function(e){r.count=3;var t={name:"bill_auth_photo",uri:e.tempFilePaths[0]};r.img.splice(2,1,t),r.src=e.tempFiles[0].path}})}},oneSide:function(){if(1==this.img.length)console.log(i(1," at pages\\register\\positive\\positive1.vue:300")),this.btn.stepOne=!1,this.btn.stepTwo=!0,this.num=1,this.src=r.default,this.step.active="step-ago",this.step.kong="step-active";else{if(!(this.img.length>1))return e.showToast({title:"请上传身份证正面照",icon:"none"});console.log(i(2," at pages\\register\\positive\\positive1.vue:309")),this.btn.stepOne=!1,this.btn.stepTwo=!0,this.num=1,this.src=this.img[1].uri,this.step.active="step-ago",this.step.kong="step-active"}},lastStep:function(){this.btn.stepOne=!0,this.btn.stepTwo=!1,this.num=0,this.active="step-active",this.kong="",this.src=this.img[0].uri},nextStep:function(){if(console.log(i(this.count," at pages\\register\\positive\\positive1.vue:338")),2==this.img.length)this.btn.stepTwo=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.num=2,this.src=n.default,this.step.active="step-ago",this.step.kong="step-ago",this.step.kong1="step-active";else{if(!(this.img.length>2))return e.showToast({title:"请上传身份证反面照",icon:"none"});this.btn.stepTwo=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.num=2,this.src=this.img[2].uri,this.step.active="step-ago",this.step.kong="step-ago",this.step.kong1="step-active"}},threeStepLast:function(){this.btn.stepThree=!1,this.btn.stepTwo=!0,this.num=1,this.step.active="step-ago",this.step.kong="step-active",this.src=this.img[1].uri},threeStepNext:function(){if("register"==this.name){console.log(i(this.register.role," at pages\\register\\positive\\positive1.vue:391"));var t=this.img.map(function(e,t){return{name:e.name,uri:e.uri}});if(3!=this.img.length)return e.showToast({title:"请上传购油授权书",icon:"none"});if(1==this.ifday)console.log(i(1," at pages\\register\\positive\\positive1.vue:401")),console.log(i(typeof this.register.role," at pages\\register\\positive\\positive1.vue:402")),"购油人"==this.register.user?(console.log(i(this.register.role," at pages\\register\\positive\\positive1.vue:404")),e.uploadFile({url:"http://dev.pjy.name:8180/api/bizcust/base/regist",files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,manager_id:this.register.customerId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,buy_auth_exp:this.day},success:function(t){var s=JSON.parse(t.data);console.log(i(t," at pages\\register\\positive\\positive1.vue:425")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"注册已提交，审核成功后即可登录使用"}),e.removeStorage({key:"register"}),e.navigateTo({url:"../../login/login?val="+s.value})):e.showToast({title:s.message,icon:"none"}))}})):"提油人"==this.register.user?e.uploadFile({url:"http://dev.pjy.name:8180/api/bizcust/base/regist",files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,manager_id:this.register.customerId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,get_auth_exp:this.day},success:function(t){var s=JSON.parse(t.data);console.log(i(s,t," at pages\\register\\positive\\positive1.vue:470")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"注册已提交，审核成功后即可登录使用"}),e.removeStorage({key:"register"}),e.navigateTo({url:"../../login/login?val="+s.value})):e.showToast({title:s.message,icon:"none"}))}}):e.uploadFile({url:"http://dev.pjy.name:8180/api/bizcust/base/regist",files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,manager_id:this.register.customerId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,bill_auth_exp:this.day},success:function(t){var s=JSON.parse(t.data);console.log(i(s," at pages\\register\\positive\\positive1.vue:515")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"注册已提交，审核成功后即可登录使用"}),e.removeStorage({key:"register"}),e.navigateTo({url:"../../login/login?val="+s.value})):e.showToast({title:s.message,icon:"none"}))}});else if(0==this.ifday)return console.log(i(this.ifday," at pages\\register\\positive\\positive1.vue:543")),e.showToast({title:"请选择授权有效期",icon:"none"})}else{console.log(i(this.register.role," at pages\\register\\positive\\positive1.vue:558"));var s=this.img.map(function(e,t){return{name:e.name,uri:e.uri}});if(console.log(i(this.img,s," at pages\\register\\positive\\positive1.vue:565")),3!=this.count)return e.showToast({title:"请上传购油授权书",icon:"none"});if(1==this.ifday)"购油人"==this.user?e.uploadFile({url:"http://dev.pjy.name:8180/api/bizcust/user/oil_authorize",files:s,fileType:"image",filePath:"",name:"file",formData:{roles:this.userCode,buy_auth_exp:this.day},header:{Token:this.Token},success:function(t){var s=JSON.parse(t.data);console.log(i(s," at pages\\register\\positive\\positive1.vue:588")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"申请成功"}),e.removeStorage({key:"register"}),e.switchTab({url:"../../info/info?val="+s.value})):e.showToast({title:s.message,icon:"none"}))}}):"提油人"==this.user?e.uploadFile({url:"http://dev.pjy.name:8180/api/bizcust/user/oil_authorize",files:s,fileType:"image",filePath:"",name:"file",formData:{roles:this.userCode,get_auth_exp:this.day},header:{Token:this.Token},success:function(t){var s=JSON.parse(t.data);console.log(i(s," at pages\\register\\positive\\positive1.vue:629")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"申请成功"}),e.removeStorage({key:"register"}),e.switchTab({url:"../../info/info?val="+s.value})):e.showToast({title:s.message,icon:"none"}))}}):(console.log(i(this.userCode," at pages\\register\\positive\\positive1.vue:653")),e.uploadFile({url:"http://dev.pjy.name:8180/api/bizcust/user/oil_authorize",files:s,fileType:"image",filePath:"",name:"file",formData:{roles:this.userCode,bill_auth_exp:this.day},header:{Token:this.Token},success:function(t){var s=JSON.parse(t.data);console.log(i(s," at pages\\register\\positive\\positive1.vue:672")),200==t.statusCode&&(0==s.errorCode?(e.showToast({title:"申请成功"}),e.removeStorage({key:"register"}),e.switchTab({url:"../../info/info?val="+s.value})):e.showToast({title:s.message,icon:"none"}))}}));else if(0==this.ifday)return console.log(i(this.ifday," at pages\\register\\positive\\positive1.vue:702")),e.showToast({title:"请选择授权有效期",icon:"none"})}},changeTimes:function(){this.times=!1,this.$refs.date.show()},onConfirm:function(e){this.day=e.result,this.ifday=!0}},computed:c({},(0,a.mapState)(["Token"])),components:{step:h,mButton:p,tButton:g,ruiDatePicker:m,wPicker:v}};t.default=d}).call(this,s("6e42")["default"],s("0de9")["default"])},"09f9":function(e,t,s){"use strict";s.r(t);var i=s("fccd"),o=s("3dd8");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);s("1f45");var n=s("2877"),a=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=a.exports},"1f45":function(e,t,s){"use strict";var i=s("ac64"),o=s.n(i);o.a},"3dd8":function(e,t,s){"use strict";s.r(t);var i=s("0044"),o=s.n(i);for(var r in i)"default"!==r&&function(e){s.d(t,e,function(){return i[e]})}(r);t["default"]=o.a},ac64:function(e,t,s){},fccd:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},o=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return o})}},[["4825","common/runtime","common/vendor"]]]);