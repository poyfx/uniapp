(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/positive/positive1"],{"09f9":function(e,t,i){"use strict";i.r(t);var s=i("5a51"),o=i("3dd8");for(var n in o)"default"!==n&&function(e){i.d(t,e,function(){return o[e]})}(n);i("1f45");var r=i("2877"),a=Object(r["a"])(o["default"],s["a"],s["b"],!1,null,null,null);t["default"]=a.exports},"1f45":function(e,t,i){"use strict";var s=i("dd03"),o=i.n(s);o.a},"3dd8":function(e,t,i){"use strict";i.r(t);var s=i("edf3"),o=i.n(s);for(var n in s)"default"!==n&&function(e){i.d(t,e,function(){return s[e]})}(n);t["default"]=o.a},4825:function(e,t,i){"use strict";(function(e){i("8790"),i("921b");s(i("66fd"));var t=s(i("09f9"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},"5a51":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement;e._self._c},o=[];i.d(t,"a",function(){return s}),i.d(t,"b",function(){return o})},dd03:function(e,t,i){},edf3:function(e,t,i){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=p(i("a7aa")),n=p(i("63eb")),r=p(i("5ff9")),a=p(i("447e")),u=p(i("d838")),c=i("2f62");i("4676"),i("71c2");function p(e){return e&&e.__esModule?e:{default:e}}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){l(e,t,i[t])})}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g=function(){return i.e("components/step/step").then(i.bind(null,"0e21"))},m=function(){return i.e("components/m-button").then(i.bind(null,"1460"))},v=function(){return i.e("components/twoButton/twoButton").then(i.bind(null,"a41a"))},d=function(){return Promise.all([i.e("common/vendor"),i.e("rattenking-dtpicker/rattenking-dtpicker")]).then(i.bind(null,"d6ea"))},f=function(){return Promise.all([i.e("common/vendor"),i.e("components/w-picker/w-picker")]).then(i.bind(null,"2ae5"))},b={data:function(){return{step:{value1:"第一步",value2:"第二步",value3:"第三步",active:"step-active",ago:"step-ago",kong:"",kong1:""},btn:{type:"primary",value:"下一步",disabled:!1,content:"上一步",commit:"注册",stepOne:!0,stepTwo:!1,stepThree:!1},info:["正面","反面"],tellinfo:["正面示例","反面示例","授权书示例"],num:0,count:0,src:o.default,day:"2019-01-01",ifday:!1,times:!0,idCardZ:"",idCardF:"",buyOil:"",register:"",img:[],name:"",inputs:"",mode:"date",userCode:"",user:"",clientID:"",faceimg:{name:"face_photo",uri:""}}},onLoad:function(t){this.user=t.user,this.userCode=t.userCode,this.faceimg.uri=t.faceimg,console.log(e(this.faceimg," at pages\\register\\positive\\positive1.vue:138")),this.register=s.getStorageSync("register"),"发票领取人"==t.user?this.info.push(t.user.slice(0,4)):this.info.push(t.user.slice(0,2)),console.log(e(this.info," at pages\\register\\positive\\positive1.vue:146")),this.name=t.name,console.log(e(this.register," at pages\\register\\positive\\positive1.vue:149")),this.getclientid()},methods:{getclientid:function(){var t=this;s.getStorage({key:"clientid",success:function(i){t.clientID=i.data,console.log(e(i," at pages\\register\\positive\\positive1.vue:159"))}})},all:function(){s.createCanvasContext("myCanvas");if(1==this.btn.stepOne){var t=this;s.chooseImage({count:1,sizeType:["compressed"],success:function(e){t.count=1;var i={name:"id_fphoto",uri:e.tempFilePaths[0]};t.img.splice(0,1,i),t.src=e.tempFiles[0].path}})}else if(1==this.btn.stepTwo){var i=this;s.chooseImage({count:1,success:function(t){console.log(e(t.tempFiles," at pages\\register\\positive\\positive1.vue:189")),i.count=2;var s={name:"id_bphoto",uri:t.tempFilePaths[0]};i.img.splice(1,1,s),i.src=t.tempFiles[0].path}})}else if(1==this.btn.stepThree)if("register"==this.name){var o=this;"购油人"==this.register.user?s.chooseImage({count:1,success:function(e){o.count=3;var t={name:"buy_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t),o.src=e.tempFiles[0].path}}):"提油人"==this.register.user?s.chooseImage({count:1,success:function(e){o.count=3;var t={name:"get_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t),o.src=e.tempFiles[0].path}}):s.chooseImage({count:1,success:function(e){o.count=3;var t={name:"bill_auth_photo",uri:e.tempFilePaths[0]};o.img.splice(2,1,t),o.src=e.tempFiles[0].path}})}else{var n=this;1==this.userCode?s.chooseImage({count:1,success:function(e){n.count=3;var t={name:"buy_auth_photo",uri:e.tempFilePaths[0]};n.img.splice(2,1,t),n.src=e.tempFiles[0].path}}):2==this.userCode?s.chooseImage({count:1,success:function(e){n.count=3;var t={name:"get_auth_photo",uri:e.tempFilePaths[0]};n.img.splice(2,1,t),n.src=e.tempFiles[0].path}}):s.chooseImage({count:1,success:function(e){n.count=3;var t={name:"bill_auth_photo",uri:e.tempFilePaths[0]};n.img.splice(2,1,t),n.src=e.tempFiles[0].path}})}},oneSide:function(){if(1==this.img.length)console.log(e(1," at pages\\register\\positive\\positive1.vue:316")),this.btn.stepOne=!1,this.btn.stepTwo=!0,this.num=1,this.src=n.default,this.step.active="step-ago",this.step.kong="step-active";else{if(!(this.img.length>1))return s.showToast({title:"请上传身份证正面照",icon:"none",position:"bottom"});console.log(e(2," at pages\\register\\positive\\positive1.vue:325")),this.btn.stepOne=!1,this.btn.stepTwo=!0,this.num=1,this.src=this.img[1].uri,this.step.active="step-ago",this.step.kong="step-active"}},lastStep:function(){this.btn.stepOne=!0,this.btn.stepTwo=!1,this.num=0,this.active="step-active",this.kong="",this.src=this.img[0].uri},nextStep:function(){if(console.log(e(this.count," at pages\\register\\positive\\positive1.vue:354")),2==this.img.length){switch(this.btn.stepTwo=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.num=2,this.register.user){case"购油人":this.src=r.default;break;case"提油人":this.src=a.default;break;case"发票领取人":this.src=u.default;break;default:break}this.step.active="step-ago",this.step.kong="step-ago",this.step.kong1="step-active"}else{if(!(this.img.length>2))return s.showToast({title:"请上传身份证反面照",icon:"none",position:"bottom"});this.btn.stepTwo=!1,this.btn.stepThree=!0,this.btn.Dates=!0,this.num=2,this.src=this.img[2].uri,this.step.active="step-ago",this.step.kong="step-ago",this.step.kong1="step-active"}},threeStepLast:function(){this.btn.stepThree=!1,this.btn.stepTwo=!0,this.num=1,this.step.active="step-ago",this.step.kong="step-active",this.src=this.img[1].uri},threeStepNext:function(){if("register"==this.name){console.log(e(this.register.role," at pages\\register\\positive\\positive1.vue:410")),"购油人"==this.register.user?this.img:this.img.push(this.faceimg),console.log(e(10," at pages\\register\\positive\\positive1.vue:416"));var t=this.img.map(function(e,t){return{name:e.name,uri:e.uri}});if(console.log(e(t," at pages\\register\\positive\\positive1.vue:423")),!(this.img.length>=3))return s.showToast({title:"请上传购油授权书",icon:"none",position:"bottom"});if(console.log(e(this.register.companyId,this.register.customerId," at pages\\register\\positive\\positive1.vue:426")),1==this.ifday)console.log(e(typeof this.register.role," at pages\\register\\positive\\positive1.vue:428")),"购油人"==this.register.user?(console.log(e(this.register.role," at pages\\register\\positive\\positive1.vue:430")),s.uploadFile({url:"http://dev.pjy.name:8170/api/bizcust/base/regist",files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,buy_auth_exp:this.day,client_id:this.clientID},success:function(t){var i=JSON.parse(t.data);console.log(e(t," at pages\\register\\positive\\positive1.vue:452")),200==t.statusCode&&(0==i.errorCode?(s.showToast({title:"注册已提交，审核成功后即可登录使用",icon:"none",position:"bottom"}),s.removeStorage({key:"register"}),s.navigateTo({url:"../../login/login?val="+i.value})):s.showToast({title:i.message,icon:"none",position:"bottom"}))}})):"提油人"==this.register.user?s.uploadFile({url:"http://dev.pjy.name:8170/api/bizcust/base/regist",files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,get_auth_exp:this.day,client_id:this.clientID},success:function(t){var i=JSON.parse(t.data);console.log(e(i,t," at pages\\register\\positive\\positive1.vue:501")),200==t.statusCode&&(0==i.errorCode?(s.showToast({title:"注册已提交，审核成功后即可登录使用",icon:"none",position:"bottom"}),s.removeStorage({key:"register"}),s.navigateTo({url:"../../login/login?val="+i.value})):s.showToast({title:i.message,icon:"none",position:"bottom"}))}}):s.uploadFile({url:"http://dev.pjy.name:8170/api/bizcust/base/regist",files:t,formData:{username:this.register.userPhoneNum,passwd:this.register.newPwd2,roles:this.register.role,customer_id:this.register.companyId,realname:this.register.userName,id_card:this.register.userId,phone:this.register.userPhoneNum,city:this.register.userCity,bill_auth_exp:this.day,client_id:this.clientID},success:function(t){var i=JSON.parse(t.data);console.log(e(i," at pages\\register\\positive\\positive1.vue:550")),200==t.statusCode&&(0==i.errorCode?(s.showToast({title:"注册已提交，审核成功后即可登录使用",icon:"none",position:"bottom"}),s.removeStorage({key:"register"}),s.navigateTo({url:"../../login/login?val="+i.value})):s.showToast({title:i.message,icon:"none",position:"bottom"}))}});else if(0==this.ifday)return console.log(e(this.ifday," at pages\\register\\positive\\positive1.vue:581")),s.showToast({title:"请选择授权有效期",icon:"none",position:"bottom"})}},changeTimes:function(){this.times=!1,this.$refs.date.show()},onConfirm:function(e){this.day=e.result,this.ifday=!0},previewImage:function(t){console.log(e(this.src,r.default," at pages\\register\\positive\\positive1.vue:769")),t>=2&&s.previewImage({current:t,urls:[r.default]})}},computed:h({},(0,c.mapState)(["Token"])),components:{step:g,mButton:m,tButton:v,ruiDatePicker:d,wPicker:f}};t.default=b}).call(this,i("0de9")["default"],i("6e42")["default"])}},[["4825","common/runtime","common/vendor"]]]);