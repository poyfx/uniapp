(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderList/invoice/invoice"],{"1a43":function(i,t,e){"use strict";var o=function(){var i=this,t=i.$createElement;i._self._c},n=[];e.d(t,"a",function(){return o}),e.d(t,"b",function(){return n})},"1c01":function(i,t,e){},"31ef":function(i,t,e){"use strict";var o=e("1c01"),n=e.n(o);n.a},c766:function(i,t,e){"use strict";e.r(t);var o=e("1a43"),n=e("f546");for(var s in n)"default"!==s&&function(i){e.d(t,i,function(){return n[i]})}(s);e("31ef");var c=e("2877"),r=Object(c["a"])(n["default"],o["a"],o["b"],!1,null,null,null);t["default"]=r.exports},eb42:function(i,t,e){"use strict";(function(i){function o(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return e.e("components/twoButton/twoButton").then(e.bind(null,"a41a"))},s=function(){return e.e("components/m-info-img/m-info-img").then(e.bind(null,"8eb7"))},c=function(){return e.e("components/m-info-text/m-info-text").then(e.bind(null,"1655"))},r={data:function(){var i;return{btn:{type:"primary",con2:"确认",dsiabled:!1},invoice:(i={company:"xxxxxxxx公司",disabled:!0,moeny:"111111111",placeholder:"22222222"},o(i,"company","开票公司"),o(i,"moeny","开票金额"),o(i,"types","发票类型"),o(i,"way","拆分方式"),o(i,"currentOil","当前购油量"),o(i,"surplus","剩余未拆油量"),i),list:[],ids:-1,typeInvoice:"请选择发票类型",invoiceTypes:!1,id:"",invoiceNum:[],show:!1,value:!1,num:"",currentOil:"",move:!1,no:"",company:"",status:"",moeny:""}},onLoad:function(i){this.id=i.id,this.currentOil=i.number,this.no=i.no,this.company=i.company,this.status=i.status,this.moeny=i.moeny},methods:{chooseInvoice:function(){this.invoiceTypes=!this.invoiceTypes},invoiceType:function(i){console.log(i," at pages\\orderList\\invoice\\invoice.vue:126"),this.typeInvoice=i.target.id,this.invoiceTypes=!this.invoiceTypes},chooseUsersShow:function(){this.invoiceTypes=!this.invoiceTypes},showIncoice:function(i){i.target.value?this.ids=1:this.ids=-1,this.show=!this.show},add:function(){this.list.push({nums:""})},detal:function(i){this.list.splice(i,1)},cancelOrder:function(){var t=this;this.test.post("order/make_invoice",{id:this.id,is_invoice:this.ids,invoice_money:this.moeny}).then(function(e){console.log(e," at pages\\orderList\\invoice\\invoice.vue:160"),200==e.statusCode&&0==e.data.errorCode&&i.redirectTo({url:"../orderDtails/orderDtails?id="+t.id+"&no="+t.no+"&status="+t.status})}).catch(function(i){console.log(i," at pages\\orderList\\invoice\\invoice.vue:167")})},invoiceSure:function(t){var e=this;if("请选择发票类型"==this.typeInvoice)i.showToast({title:"请选择发票类型",icon:"none"});else{this.invoiceNum=[];var o=this;0==this.list.length?(this.invoiceNum.push(this.num),this.invoiceNum=String(this.invoiceNum)):(this.invoiceNum.push(this.num),this.list.forEach(function(i){console.log(i," at pages\\orderList\\invoice\\invoice.vue:188"),o.invoiceNum.push(i.nums)}),this.invoiceNum=String(this.invoiceNum)),console.log(typeof this.invoiceNum," at pages\\orderList\\invoice\\invoice.vue:194"),console.log(this.invoiceNum," at pages\\orderList\\invoice\\invoice.vue:195"),1==this.ids?""!==this.invoiceNum?0==this.surplusOil?this.test.post("order/make_invoice",{id:this.id,invoice_type:this.typeInvoice,is_invoice:this.ids,invoice_split:this.invoiceNum,invoice_money:this.moeny}).then(function(t){console.log(t," at pages\\orderList\\invoice\\invoice.vue:206"),200==t.statusCode&&0==t.data.errorCode&&(i.showToast({title:"开票成功"}),i.redirectTo({url:"../orderDtails/orderDtails?id="+e.id+"&no="+e.no+"&status="+e.status}))}).catch(function(i){console.log(i," at pages\\orderList\\invoice\\invoice.vue:216")}):i.showToast({title:"发票拆分数量必须与当前油量一致",icon:"none"}):i.showToast({title:"请填写拆分数量",icon:"none"}):-1==this.ids&&this.test.post("order/make_invoice",{id:this.id,invoice_type:this.typeInvoice,is_invoice:this.ids,invoice_split:this.currentOil,invoice_money:this.moeny}).then(function(t){console.log(t," at pages\\orderList\\invoice\\invoice.vue:240"),200==t.statusCode&&0==t.data.errorCode&&(i.showToast({title:"开票成功"}),i.redirectTo({url:"../orderDtails/orderDtails?id="+e.id+"&no="+e.no+"&status="+e.status}))}).catch(function(i){console.log(i," at pages\\orderList\\invoice\\invoice.vue:250")})}}},components:{tButton:n,infoImg:s,infoText:c},watch:{surplusOil:function(t,e){console.log(t,e," at pages\\orderList\\invoice\\invoice.vue:265"),t<0?(this.btn.disabled=!0,i.showToast({title:"输入的数字不能超过总吨数",icon:"none"})):this.btn.disabled=!1}},computed:{surplusOil:function(){if(0===this.list.length)return parseFloat(this.currentOil-this.num);for(var i=parseFloat(this.currentOil-this.num),t=0;t<this.list.length;t++)i-=this.list[t].nums;return i}}};t.default=r}).call(this,e("6e42")["default"])},f546:function(i,t,e){"use strict";e.r(t);var o=e("eb42"),n=e.n(o);for(var s in o)"default"!==s&&function(i){e.d(t,i,function(){return o[i]})}(s);t["default"]=n.a}},[["9dd4","common/runtime","common/vendor"]]]);