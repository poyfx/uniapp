(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderList/invoice/invoice"],{"1c01":function(i,e,t){},"31ef":function(i,e,t){"use strict";var n=t("1c01"),o=t.n(n);o.a},"8b87":function(i,e,t){"use strict";var n=function(){var i=this,e=i.$createElement;i._self._c},o=[];t.d(e,"a",function(){return n}),t.d(e,"b",function(){return o})},c766:function(i,e,t){"use strict";t.r(e);var n=t("8b87"),o=t("f546");for(var s in o)"default"!==s&&function(i){t.d(e,i,function(){return o[i]})}(s);t("31ef");var c=t("2877"),u=Object(c["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=u.exports},eb42:function(i,e,t){"use strict";(function(i,n){function o(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return t.e("components/twoButton/twoButton").then(t.bind(null,"a41a"))},c=function(){return t.e("components/m-info-img/m-info-img").then(t.bind(null,"8eb7"))},u=function(){return t.e("components/m-info-text/m-info-text").then(t.bind(null,"1655"))},r={data:function(){var i;return{btn:{type:"primary",con2:"确认",dsiabled:!1},invoice:(i={company:"xxxxxxxx公司",disabled:!0,moeny:"111111111",placeholder:"22222222"},o(i,"company","开票公司"),o(i,"moeny","开票金额"),o(i,"types","发票类型"),o(i,"way","拆分方式"),o(i,"currentOil","当前购油量"),o(i,"surplus","剩余未拆油量"),i),list:[],ids:-1,yesORno:"否",typeInvoice:"请选择发票类型",invoiceTypes:!1,id:"",invoiceNum:[],show:!1,value:!1,num:0,currentOil:"",move:!1,no:"",company:"",status:"",moeny:""}},onLoad:function(i){this.id=i.id,this.currentOil=i.number,this.no=i.no,this.company=i.company,this.status=i.status,this.moeny=i.moeny},methods:{chooseInvoice:function(){this.invoiceTypes=!this.invoiceTypes},invoiceType:function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:127")),this.typeInvoice=e.target.id,this.invoiceTypes=!this.invoiceTypes},chooseUsersShow:function(){this.invoiceTypes=!this.invoiceTypes},showIncoice:function(i){i.target.value?(this.yesORno="是",this.ids=1):(this.yesORno="否",this.ids=-1),this.show=!this.show},add:function(){this.list.push({nums:""})},detal:function(i){this.list.splice(i,1)},cancelOrder:function(){var e=this;n.showModal({title:"提示",content:"确认不开发票吗?",success:function(t){t.confirm&&e.test.post("order/make_invoice",{id:e.id,is_invoice:e.yesORno,invoice_money:e.moeny}).then(function(t){console.log(i(t," at pages\\orderList\\invoice\\invoice.vue:168")),200==t.statusCode&&0==t.data.errorCode&&n.redirectTo({url:"../orderDtails/orderDtails?id="+e.id+"&no="+e.no+"&status="+e.status})}).catch(function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:175"))})}})},invoiceSure:function(e){var t=this;if("请选择发票类型"==this.typeInvoice)n.showToast({title:"请选择发票类型",icon:"none"});else{this.invoiceNum=[];var o=this;if(0==this.list.length?(this.invoiceNum.push(this.num),this.invoiceNum=String(this.invoiceNum)):(this.invoiceNum.push(this.num),this.list.forEach(function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:202")),o.invoiceNum.push(e.nums)}),this.invoiceNum=String(this.invoiceNum)),1==this.ids)""!==this.invoiceNum?0==this.surplusOil?n.showModal({title:"提示",content:"确认开票",success:function(e){e.confirm&&t.test.post("order/make_invoice",{id:t.id,invoice_type:t.typeInvoice,is_invoice:t.yesORno,invoice_split:t.invoiceNum,invoice_money:t.moeny}).then(function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:225")),200==e.statusCode&&0==e.data.errorCode&&(n.showToast({title:"开票成功"}),n.redirectTo({url:"../orderDtails/orderDtails?id="+t.id+"&no="+t.no+"&status="+t.status}))}).catch(function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:235"))})}}):n.showToast({title:"发票拆分数量必须与当前油量一致",icon:"none"}):n.showToast({title:"请填写拆分数量",icon:"none"});else if(-1==this.ids){n.showModal({title:"提示",content:"确认开票",success:function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:265")),e.confirm&&(console.log(i(1," at pages\\orderList\\invoice\\invoice.vue:267")),t.test.post("order/make_invoice",{id:t.id,invoice_type:t.typeInvoice,is_invoice:t.yesORno,invoice_split:t.currentOil,invoice_money:t.moeny}).then(function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:275")),200==e.statusCode&&0==e.data.errorCode&&(n.showToast({title:"开票成功"}),n.redirectTo({url:"../orderDtails/orderDtails?id="+t.id+"&no="+t.no+"&status="+t.status}))}).catch(function(e){console.log(i(e," at pages\\orderList\\invoice\\invoice.vue:285"))}))}})}}}},components:{tButton:s,infoImg:c,infoText:u},watch:{surplusOil:function(e,t){console.log(i(e,t," at pages\\orderList\\invoice\\invoice.vue:305")),e<0?(this.btn.disabled=!0,n.showToast({title:"输入的数字不能超过总吨数",icon:"none"})):this.btn.disabled=!1}},computed:{surplusOil:function(){if(0===this.list.length)return parseFloat(this.currentOil-this.num);for(var i=parseFloat(this.currentOil-this.num),e=0;e<this.list.length;e++)i-=this.list[e].nums;return i}}};e.default=r}).call(this,t("0de9")["default"],t("6e42")["default"])},f546:function(i,e,t){"use strict";t.r(e);var n=t("eb42"),o=t.n(n);for(var s in n)"default"!==s&&function(i){t.d(e,i,function(){return n[i]})}(s);e["default"]=o.a}},[["9dd4","common/runtime","common/vendor"]]]);