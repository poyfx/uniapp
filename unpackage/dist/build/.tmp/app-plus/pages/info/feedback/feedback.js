(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/info/feedback/feedback"],{"0b70":function(e,t,o){},"5fc9":function(e,t,o){"use strict";var n=o("0b70"),a=o.n(n);a.a},"8a6c":function(e,t,o){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("2f62");function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),n.forEach(function(t){c(e,t,o[t])})}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=function(){return o.e("components/robby-image-upload/robby-image-upload").then(o.bind(null,"fc73"))},f=function(){return o.e("components/m-button").then(o.bind(null,"1460"))},s={data:function(){return{number:"0",imageData:[],btn:{type:"primary",value:"提交"},feedbacks:""}},methods:{countNum:function(e){this.number=e.detail.cursor},addImage:function(t){var o=this;e.chooseImage({count:1,success:function(e){console.log(n(e," at pages\\info\\feedback\\feedback.vue:72")),o.imageData.push({name:"feedback"+o.imageData.length,uri:e.tempFilePaths[0]}),console.log(n(o.imageData," at pages\\info\\feedback\\feedback.vue:77"))},complete:function(e){console.log(n(e," at pages\\info\\feedback\\feedback.vue:81"))}})},deleteImage:function(e){console.log(n(e," at pages\\info\\feedback\\feedback.vue:87"))},commit:function(){if(0==this.feedbacks.length)return e.showToast({title:"请填写反馈意见",icon:"none",position:"bottom"});if(this.feedbacks.length<10)return e.showToast({title:"反馈意见必须是10个字及以上",icon:"none",position:"bottom"});if(this.imageData.length<=0)e.showLoading({title:"提交中..."}),this.test.post("user/submit_feedback_notPhoto",{feedback:this.feedbacks}).then(function(t){if(e.hideLoading(),console.log(n(t," at pages\\info\\feedback\\feedback.vue:111")),200==t.statusCode&&0==t.data.errorCode)e.showToast({title:"上传成功"}),e.switchTab({url:"../info"});else if(10001==t.data.errorCode||10002==t.data.errorCode||10003==t.data.errorCode)e.showModal({title:"提示",content:t.data.message,success:function(t){t.confirm,e.reLaunch({url:"../../login/login"})}});else{if(-1e4==t.data.errorCode)return;e.showToast({title:"上传失败",icon:"none",position:"bottom"})}}).catch(function(t){e.hideLoading(),e.showToast({title:"提交失败",icon:"none",position:"bottom"}),console.log(n(t," at pages\\info\\feedback\\feedback.vue:152"))});else{console.log(n(this.imageData," at pages\\info\\feedback\\feedback.vue:156"));var t=this.imageData.map(function(e,t){return{name:e.name,uri:e.uri}});console.log(n(t,this.feedbacks," at pages\\info\\feedback\\feedback.vue:163")),e.uploadFile({url:"http://dev.pjy.name:8170/api/bizcust/user/submit_feedback",files:t,formData:{feedback:this.feedbacks},success:function(t){console.log(n(t," at pages\\info\\feedback\\feedback.vue:171"));var o=JSON.parse(t.data);console.log(n(o," at pages\\info\\feedback\\feedback.vue:173")),200==t.statusCode&&0==o.errorCode?(e.showToast({title:"上传成功"}),e.switchTab({url:"../info"})):e.showToast({title:"上传失败",icon:"none",position:"bottom"})},header:{Token:this.Token}})}}},computed:i({},(0,a.mapState)(["Token"])),components:{robbyImageUpload:u,mButton:f}};t.default=s}).call(this,o("6e42")["default"],o("0de9")["default"])},"95b1":function(e,t,o){"use strict";o.r(t);var n=o("8a6c"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},bf23:function(e,t,o){"use strict";(function(e){o("8790"),o("921b");n(o("66fd"));var t=n(o("fc87"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},f3d4:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return a})},fc87:function(e,t,o){"use strict";o.r(t);var n=o("f3d4"),a=o("95b1");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("5fc9");var c=o("2877"),u=Object(c["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=u.exports}},[["bf23","common/runtime","common/vendor"]]]);