(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1fb7":function(e,t,n){"use strict";(function(e){n("8790"),n("921b");a(n("66fd"));var t=a(n("a4fc"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"29b6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o})},"62a2":function(e,t,n){},"678e":function(e,t,n){"use strict";n.r(t);var a=n("f415"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=o.a},a4fc:function(e,t,n){"use strict";n.r(t);var a=n("29b6"),o=n("678e");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("b040");var r=n("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,null,null);t["default"]=s.exports},b040:function(e,t,n){"use strict";var a=n("62a2"),o=n.n(a);o.a},f415:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2f62");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){return Promise.all([n.e("common/vendor"),n.e("components/banner/banner")]).then(n.bind(null,"0655"))},c=function(){return n.e("components/nav/nav").then(n.bind(null,"123d"))},u={data:function(){return{title:"",datas:[],gain:[],datasTime:"",refining:[],refiningGain:[],refiningTime:"",img:[],address:"",city:"",district:"",adcode:"",cityInfo:"",weather:"",dates:"",date:"",week:"",temperature:"",s:"s",j:"j",autoplay:!1,indicatorDots:!0,interval:2e3,duration:500,circular:!0,myManagerBox:{},modelshow:!1,dots:!1,noticeContent:"",noticeshow:!1,priceshow:Boolean,letterContent:""}},onShow:function(){this.getlocation(),this.getDate(),this.getInfo(),this.setLetter(),this.setNotice(),this.setDot()},methods:{getInfo:function(){var t=this;e.getStorage({key:"userInfo",success:function(e){console.log(a(e," at pages\\index\\index.vue:351")),console.log(a(t.datas.validTime," at pages\\index\\index.vue:352"));var n=e.data.oilPrice;t.datas=n.oilPrice,t.gain=n.oilAmplitude,t.myManagerBox=e.data.managers,t.datasTime=new Date(t.datas.valid_time+288e5).toJSON().substr(0,10).replace("T"," ").replace(/-/g,"-");var o=e.data.bizcustRefining;t.refining=o.refiningPrice,t.refiningGain=o.refiningOilAmplitude,t.refiningTime=new Date(t.refining.valid_time+288e5).toJSON().substr(0,10).replace("T"," ").replace(/-/g,"-"),t.myManagerBox.length<2?t.indicatorDots=!1:t.indicatorDots=!0;var i=e.data.banners;t.img=i,t.priceshow=e.data.isShow.oilPrice}})},setDot:function(){var e=this;this.test.post("user/count_letter_notice").then(function(t){0==t.data.value?e.dots=!1:e.dots=!0}).catch(function(e){console.log(a(e," at pages\\index\\index.vue:396"))})},setLetter:function(){var t=this;this.test.post("user/get_letter").then(function(n){if(console.log(a(n," at pages\\index\\index.vue:403")),n.statusCode&&0==n.data.errorCode){if(null==n.data.value||""==n.data.value)return;0==n.data.value.confirm_type&&(t.modelshow=!0,t.letterContent=n.data.value)}else e.showToast({title:n.data.message,icon:"none",position:"bottom"})}).catch(function(e){console.log(a(e," at pages\\index\\index.vue:422"))})},setAccount:function(){e.navigateTo({url:"./letter/account/buyOilList?id="+this.letterContent.id})},closeModel:function(){this.modelshow=!1},setNotice:function(){var t=this;this.test.post("user/list_notices").then(function(n){if(console.log(a(n," at pages\\index\\index.vue:438")),200==n.statusCode&&0==n.data.errorCode){if(0==n.data.value.length)return void console.log(a(1," at pages\\index\\index.vue:441"));0==n.data.value[0].is_read&&(t.noticeshow=!0,t.noticeContent=n.data.value[0])}else e.showToast({title:n.data.message,icon:"none",position:"bottom"})}).catch(function(e){console.log(a(e," at pages\\index\\index.vue:459"))})},closeNotice:function(){this.noticeshow=!1},setNoticies:function(t){e.navigateTo({url:"./letter/notice/noticeList?id="+t})},callPhone:function(t,n){e.showModal({title:"呼叫客户经理-"+n,confirmText:"呼叫",content:t,success:function(n){if(n.confirm)e.makePhoneCall({phoneNumber:t});else if(n.cancel)return}})},getlocation:function(){var t=this;e.request({url:"https://restapi.amap.com/v3/ip?parameters",header:{"Content-Type":"application/json;charset=UTF-8"},data:{key:"b5066e0a9a2a996397e9172fc67fdf40"},success:function(e){t.city=e.data.city,t.adcode=e.data.adcode,t.getWeather()}})},getWeather:function(){var t=this;e.request({url:"https://restapi.amap.com/v3/weather/weatherInfo?parameters",header:{"Content-Type":"application/json;charset=UTF-8"},data:{key:"b5066e0a9a2a996397e9172fc67fdf40",city:t.adcode,extensions:"base"},methods:"GET",success:function(e){e.data.lives.forEach(function(e){t.temperature=e.temperature,t.weather=e.weather})}})},getDate:function(){var e=new Date,t=e.getDay(),n=e.getMonth()+1,a=e.getFullYear(),o=e.getDate();switch(this.date=a+"-"+n+"-"+o,this.dates=n+"月"+o+"日",t){case 0:return this.week="星期天";case 1:return this.week="星期一";case 2:return this.week="星期二";case 3:return this.week="星期三";case 4:return this.week="星期四";case 5:return this.week="星期五";case 6:return this.week="星期六"}},message:function(){e.navigateTo({url:"./letter/letter"})}},computed:i({},(0,o.mapState)(["hasLogin","userInfo","roles","Token"])),components:{banner:s,navs:c}};t.default=u}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["1fb7","common/runtime","common/vendor"]]]);